# 微信小程序起步
微信发布了一整套网页开发工具包，称之为JS-SDK，有很多API，类似与拍摄、录音、语音识别等。

JS-SDK解决了移动端受限设备性能和网络的问题，称为微信Web资源离线存储。

### 小程序和普通网页的区别
网页开发渲软线程和脚本线程是互斥，逻辑层是在**JSCore**，没有DOM API和BOM API，无法使用一些库JQuery等库。又由于JSCore的环境和NodeJS环境不同，所以一些npm的包也无法运行。

网页和小程序的运行环境也不同

+ 小程序运行环境为IOS、安卓、小程序开发工具
+ 网页则是是需要浏览器，还要搭配了一些工具或编辑器。

### 小程序代码构成

#### JSON配置

`.json` 后缀的JSON配置文件

JSON数据格式，一般是key和value相对应。

数据格式：

1. **number**
2. **string**
3. **bool**
4. **array**
5. **Object**
6. **Null**

其他格式会触发报错。

根目录有`app.json`、`project.config.json`，`pages/logs`目录下有`logs.json`

+ `app.json` 小程序配置

  小程序的全局配置。有页面路径、界面样式、网络超时时间等。

  ```json
  {
    "pages":[
      "pages/index/index", //页面路径
      "pages/logs/logs"
    ],
    "window":{ //界面样式
      "backgroundTextStyle":"light",
      "navigationBarBackgroundColor": "#fff",
      "navigationBarTitleText": "Weixin",
      "navigationBarTextStyle":"black"
    },
    "style": "v2",
    "sitemapLocation": "sitemap.json"
  }

  ```

+ `project.config.json` 工具配置

  自定义个性化配置，可导出使用。

+ `page.json` 页面配置

  单个页面的配置例如样式等。

#### WXML模板

`.wxml` 后缀的WXML模板文件

类似于HTML，但标签、属性两者不相同

也采用了类似Vue、React的开发模式

#### WXSS样式
`.wxss` 后缀的WXSS样式文件

具有CSS的大部分的特性。

1. 新增尺寸单位**rpx**。
2. 也有全局样式和局部样式
3. 支持部分css选择器

#### JS逻辑交互
`.js` 后缀的JS脚本逻辑文件

用于制作交互，用js执行用户操作。

### 小程序宿主环境
#### 渲染层和逻辑层
WXML模板和WXSS样式处于渲染层，JS脚本处于逻辑层

两个层由两个线程管理：

渲染层使用WebView进行渲软

逻辑层JsCore线程运行脚本

多个界面所以渲染层有多个WebView线程，两个线程通过微信客户端(Native)为中转，Native可以发送网络请求等

#### 程序与页面
小程序只有一个App示例，全部页面共享，可以接受一些生命周期的钩子用于执行

#### 组件
小程序提供了很多基础组件，可以通过style或class来控制组件的外层样式

#### API
小程序提供了很多API，例如地理位置、扫一扫，多数API回调都是异步的

### 目录结构
一个描述整体程序的app和多个描述各自页面的page

小程序主体部分由三个文件组成，必须在根目录下

+ app.js
+ app.json
+ app.wxss

小程序页面由四个文件组成

+ js
+ wxml
+ json
+ wxss

允许上传的文件

由于文件会经过编译，一些文件无法访问到，但有些文件可以被访问到但无法上传，[白名单](https://developers.weixin.qq.com/miniprogram/dev/framework/structure.html)内的可以被上传。

